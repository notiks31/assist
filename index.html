<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í™˜ìŠ¹ ì–´ì‹œìŠ¤íŠ¸ (Transfer Assist)</title>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container">
    <div class="top-map-area">
        <div class="status-bar">
            <span id="realtime-clock">00:00</span>
            <span>LTE 80%</span>
        </div>
        
        <div id="map" style="width:100%; height:100%;"></div>

        <div class="map-badge" id="map-status-text">ğŸ“ í˜„ì¬ ìœ„ì¹˜ íƒìƒ‰ ì¤‘</div>
    </div>

    <div class="bottom-content-area">

        <div id="step-1" class="screen active">
            <div class="content-header">ì–´ë””ë¡œ ê°ˆê¹Œìš”?</div>
            
            <div class="input-group">
                <div class="input-box">
                    <span>ğŸ”µ</span> 
                    <input type="text" id="start-input" value="ëƒ‰ì •ì—­ 2í˜¸ì„ " onkeyup="filterPlaces('start-input', 'start-list')">
                </div>
                <div id="start-list" class="suggestion-list"></div>
            </div>

            <div class="input-group">
                <div class="input-box">
                    <span>ğŸ”´</span> 
                    <input type="text" id="end-input" placeholder="ë„ì°©ì§€ ê²€ìƒ‰ (ì˜ˆ: ë™ì˜ëŒ€)" onkeyup="filterPlaces('end-input', 'end-list')">
                </div>
                <div id="end-list" class="suggestion-list"></div>
            </div>
            
            <div style="margin-top: 20px;">
                <div style="font-size:12px; color:#888; margin-bottom:10px;">ì¦ê²¨ì°¾ê¸°</div>
                <div class="input-box" style="background:white; border:1px solid #eee; cursor:pointer;" onclick="setFavorite()">
                    <span>â­</span> <div><strong>ì§‘ â†’ í•™êµ</strong><br><span style="font-size:11px; color:#aaa;">33ë²ˆ ë²„ìŠ¤ ì´ìš©</span></div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="goToStep(2)">ê²½ë¡œ ì°¾ê¸°</button>
        </div>

        <div id="step-2" class="screen">
            <div class="content-header">
                <span>ì¶”ì²œ ê²½ë¡œ</span>
                <span style="font-size:14px; color:var(--primary);">24ë¶„ ì†Œìš”</span>
            </div>

            <div class="timeline-container">
                <div class="timeline-left">
                    <span class="timeline-time">12:36</span>
                    <div class="timeline-dot active"></div>
                    <div class="timeline-line active"></div>
                </div>
                <div class="timeline-right">
                    <div class="location-title" id="route-start-text">ëƒ‰ì •ì—­</div>
                </div>

                <div class="timeline-left">
                    <div class="timeline-line active"></div>
                    <span class="timeline-icon">ğŸš¶</span>
                </div>
                <div class="timeline-right">
                    <div class="location-title">ë„ë³´ 1ë¶„</div>
                </div>

                <div class="timeline-left">
                    <span class="timeline-time">12:42</span>
                    <div class="timeline-dot active"></div>
                    <div class="timeline-line active"></div>
                </div>
                <div class="timeline-right">
                    <div class="location-title">ëƒ‰ì •ì—­ ì •ë¥˜ì¥</div>
                    <div class="bus-info-box" onclick="goToStep(3)">
                        <div style="margin-bottom:5px;">
                            <span class="bus-tag">ê³§ ë„ì°©</span>
                            <span style="color:var(--primary); font-weight:bold;">33ë²ˆ</span>
                        </div>
                        <div class="location-desc">
                            âŒ„ 5ë¶„ (ì •ë¥˜ì¥ 4ê°œ) ì´ë™<br>
                            ê°œê¸ˆì—­ ê²½ìœ 
                        </div>
                    </div>
                </div>

                <div class="timeline-left">
                    <span class="timeline-time">12:47</span>
                    <div class="timeline-dot"></div>
                    <div class="timeline-line" style="height:50%;"></div>
                </div>
                <div class="timeline-right">
                    <div class="location-title" id="route-end-text">ë™ì˜ëŒ€ì—­</div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="goToStep(3)">ì´ ê²½ë¡œë¡œ ì•ˆë‚´ ì‹œì‘</button>
        </div>

        <div id="step-3" class="screen">
            <div class="content-header">ë²„ìŠ¤ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘</div>
            <div class="bus-info-box" style="text-align:center; background:white; border:2px solid var(--primary);">
                <div style="font-size:14px;">33ë²ˆ ë²„ìŠ¤</div>
                <div style="font-size:32px; font-weight:bold; color:var(--danger); margin:10px 0;">3ë¶„ 20ì´ˆ</div>
                <div style="color:#888;">ì ì‹œ í›„ ë„ì°©í•©ë‹ˆë‹¤</div>
            </div>
            <button class="btn btn-primary" onclick="goToStep(4)">ë²„ìŠ¤ íƒ‘ìŠ¹ ì™„ë£Œ</button>
        </div>

        <div id="step-4" class="screen">
            <div class="content-header">ì´ë™ ì¤‘...</div>
            <div class="timeline-container">
                <div class="timeline-left">
                    <div class="timeline-dot active"></div>
                    <div class="timeline-line active"></div>
                </div>
                <div class="timeline-right">
                    <div class="location-title">ëƒ‰ì •ì—­ (íƒ‘ìŠ¹)</div>
                </div>
                <div class="timeline-left">
                    <span class="timeline-icon">ğŸšŒ</span>
                </div>
                <div class="timeline-right">
                    <div class="location-title" style="color:var(--primary);">í˜„ì¬: ê°œê¸ˆì—­ ì¸ê·¼</div>
                    <div class="location-desc">2ì •ê±°ì¥ ë‚¨ìŒ (ê³§ í•˜ì°¨)</div>
                </div>
            </div>
            <button class="btn btn-warning" onclick="goToStep(5)">ğŸ”” í•˜ì°¨ ë²¨ ëˆ„ë¥´ê¸°</button>
        </div>

        <div id="step-5" class="screen">
            <div style="text-align:center; margin-bottom:20px;">
                <div style="font-size:14px; color:#888;">í™˜ìŠ¹ ìœ íš¨ ì‹œê°„</div>
                <div class="timer-big" id="transfer-timer">30:00</div>
                <div style="color:var(--success); font-weight:bold;">ì§€ê¸ˆì€ ì—¬ìœ  ìˆì–´ìš”!</div>
            </div>
            <div class="bus-info-box">
                <strong>ë‹¤ìŒ ë²„ìŠ¤ (110-1ë²ˆ)</strong>
                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                    <span>ë„ì°© ì˜ˆì •</span>
                    <span style="color:var(--danger); font-weight:bold;">15ë¶„ í›„</span>
                </div>
            </div>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:auto;">
                <button class="btn btn-outline" style="margin:0;" onclick="goToStep(6)">â˜• ì£¼ë³€ í¸ì˜ì </button>
                <button class="btn btn-primary" style="margin:0;" onclick="goToStep(7)">ğŸš¶ ì •ë¥˜ì¥ ì´ë™</button>
            </div>
        </div>

        <div id="step-6" class="screen">
            <div class="content-header">ì ê¹ ë“¤ë¥¼ê¹Œìš”?</div>
            <div class="bus-info-box" style="background:white; border:1px solid #eee;">
                <div style="display:flex; align-items:center; gap:10px;">
                    <div style="font-size:24px;">ğŸª</div>
                    <div>
                        <strong>CU í¸ì˜ì </strong>
                        <div style="font-size:12px; color:#888;">ì™•ë³µ 5ë¶„ ì†Œìš” (ì¶©ë¶„í•¨)</div>
                    </div>
                </div>
            </div>
             <div class="bus-info-box" style="background:white; border:1px solid #eee;">
                <div style="display:flex; align-items:center; gap:10px;">
                    <div style="font-size:24px;">â˜•</div>
                    <div>
                        <strong>ë©”ê°€ì»¤í”¼</strong>
                        <div style="font-size:12px; color:#888;">ì™•ë³µ 8ë¶„ ì†Œìš”</div>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="goToStep(5)">íƒ€ì´ë¨¸ í™”ë©´ ë³µê·€</button>
        </div>

        <div id="step-7" class="screen">
            <div class="bus-info-box" style="background-color:#FFF4E5; border:1px solid #FFD93D;">
                <h3 style="margin:0; color:#B45309;">âš ï¸ ì„œë‘ë¥´ì„¸ìš”!</h3>
                <p style="margin:10px 0 0; color:#B45309; font-size:14px;">ë²„ìŠ¤ê°€ <strong>5ë¶„ í›„</strong> ë„ì°©í•©ë‹ˆë‹¤.<br>ì§€ê¸ˆ ì •ë¥˜ì¥ìœ¼ë¡œ ê°€ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="timeline-container" style="margin-top:20px;">
                 <div class="timeline-left">
                    <span class="timeline-icon">ğŸš¶</span>
                </div>
                <div class="timeline-right">
                    <div class="location-title">ì •ë¥˜ì¥ê¹Œì§€ ë„ë³´ 3ë¶„</div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="goToStep(8)">í™˜ìŠ¹ ë²„ìŠ¤ íƒ‘ìŠ¹</button>
        </div>

        <div id="step-8" class="screen">
            <div class="content-header">ëª©ì ì§€ë¡œ ì´ë™ ì¤‘</div>
            <div class="timeline-container">
                 <div class="timeline-left">
                    <div class="timeline-dot active"></div>
                    <div class="timeline-line active"></div>
                </div>
                <div class="timeline-right">
                    <div class="location-title">ê°€ì•¼ê³ êµ (í™˜ìŠ¹)</div>
                </div>
                 <div class="timeline-left">
                     <span class="timeline-icon">ğŸšŒ</span>
                </div>
                <div class="timeline-right">
                    <div class="location-title">110-1ë²ˆ íƒ‘ìŠ¹ ì¤‘</div>
                    <div class="location-desc">ëª©ì ì§€ê¹Œì§€ 3ì •ê±°ì¥</div>
                </div>
            </div>
            <button class="btn btn-success" onclick="goToStep(9)">ëª©ì ì§€ ë„ì°©</button>
        </div>

        <div id="step-9" class="screen">
            <div style="text-align:center; margin-top:30px;">
                <div style="font-size:60px;">ğŸ‰</div>
                <h2>ë„ì°© ì™„ë£Œ!</h2>
                <p style="color:#888;">í™˜ìŠ¹ì— ì„±ê³µí•˜ì—¬ ìš”ê¸ˆì„ ì•„ê¼ˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="bus-info-box" style="background:white; border:1px solid #eee;">
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <span>ì´ ì†Œìš” ì‹œê°„</span> <strong>38ë¶„</strong>
                </div>
                <div style="display:flex; justify-content:space-between; color:var(--primary);">
                    <span>ì ˆì•½í•œ ìš”ê¸ˆ</span> <strong>1,450ì›</strong>
                </div>
            </div>
            <button class="btn btn-primary" onclick="goToStep(1)">ì²˜ìŒìœ¼ë¡œ</button>
        </div>

    </div>
</div>

<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=9d433a391319ff5dd19c3ae6940148df"></script>

<script>
    /* =========================================
       [ê¸°ëŠ¥ 1] ì‹¤ì‹œê°„ ì‹œê³„ ì—…ë°ì´íŠ¸
       ========================================= */
    function updateClock() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        document.getElementById('realtime-clock').textContent = `${hours}:${minutes}`;
    }
    setInterval(updateClock, 1000); 
    updateClock(); 

    /* =========================================
       [ê¸°ëŠ¥ 2] ìë™ì™„ì„± ë°ì´í„° ë° ë¡œì§
       ========================================= */
    const mockPlaces = [
        "ëƒ‰ì •ì—­ 2í˜¸ì„ ", "ë™ì˜ëŒ€ì—­ 2í˜¸ì„ ", "ê°œê¸ˆì—­ 2í˜¸ì„ ", "ê°€ì•¼ì—­ 2í˜¸ì„ ",
        "ì„œë©´ì—­ 1í˜¸ì„ ", "ë¶€ì‚°ì—­ 1í˜¸ì„ ", "ì£¼ë¡€ì—­ 2í˜¸ì„ ", "ì‚¬ìƒì—­ 2í˜¸ì„ ",
        "ë™ì˜ëŒ€í•™êµ", "ê²½ë‚¨ì •ë³´ëŒ€", "ë™ì„œëŒ€í•™êµ", "ê°€ì•¼ê³ ë“±í•™êµ",
        "ë¶€ì‚°ì§„ì†Œë°©ì„œ", "ê°œê¸ˆë°±ë³‘ì›", "ë¡¯ë°ë°±í™”ì  ë¶€ì‚°ë³¸ì "
    ];

    function filterPlaces(inputId, listId) {
        const input = document.getElementById(inputId);
        const list = document.getElementById(listId);
        const filter = input.value.toLowerCase();

        if (!filter) {
            list.style.display = 'none';
            return;
        }

        const filtered = mockPlaces.filter(place => place.toLowerCase().includes(filter));

        if (filtered.length > 0) {
            list.innerHTML = "";
            filtered.forEach(item => {
                const div = document.createElement('div');
                div.className = 'suggestion-item';
                const regex = new RegExp(`(${filter})`, 'gi');
                const highlighted = item.replace(regex, '<span class="match-text">$1</span>');
                div.innerHTML = highlighted;
                div.onclick = function() {
                    input.value = item;
                    list.style.display = 'none';
                };
                list.appendChild(div);
            });
            list.style.display = 'block';
        } else {
            list.style.display = 'none';
        }
    }

    document.addEventListener('click', function(e) {
        if (!e.target.closest('.input-group')) {
            document.querySelectorAll('.suggestion-list').forEach(el => el.style.display = 'none');
        }
    });

    function setFavorite() {
        document.getElementById('start-input').value = "ì§‘";
        document.getElementById('end-input').value = "í•™êµ";
    }

    /* =========================================
       [ê¸°ì¡´ ê¸°ëŠ¥] ì§€ë„ ë° ì•± ë¡œì§
       ========================================= */
    var mapContainer = document.getElementById('map');
    var startPos = new kakao.maps.LatLng(35.1512, 129.0123); 
    var transferPos = new kakao.maps.LatLng(35.1532, 129.0205);
    var endPos = new kakao.maps.LatLng(35.1555, 129.0350);

    var mapOption = { center: startPos, level: 4 };
    var map = new kakao.maps.Map(mapContainer, mapOption);

    function addMarker(position) {
        var marker = new kakao.maps.Marker({ position: position });
        marker.setMap(map);
        return marker;
    }
    addMarker(startPos);
    addMarker(transferPos);
    addMarker(endPos);

    let timerInterval;

    function goToStep(stepNumber) {
        if (stepNumber === 2) {
            const startVal = document.getElementById('start-input').value;
            const endVal = document.getElementById('end-input').value;
            document.getElementById('route-start-text').textContent = startVal || "ì¶œë°œì§€";
            document.getElementById('route-end-text').textContent = endVal || "ëª©ì ì§€";
        }

        document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
        const targetScreen = document.getElementById(`step-${stepNumber}`);
        if(targetScreen) targetScreen.classList.add('active');

        const badge = document.getElementById('map-status-text');
        
        switch(stepNumber) {
            case 1:
                badge.innerHTML = "ğŸ“ í˜„ì¬ ìœ„ì¹˜ íƒìƒ‰ ì¤‘";
                map.panTo(startPos); 
                map.setLevel(4);
                break;
            case 2:
                badge.innerHTML = "ğŸ—ºï¸ ê²½ë¡œ ì „ì²´ ë³´ê¸°";
                map.setCenter(transferPos);
                map.setLevel(7);
                break;
            case 3:
                badge.innerHTML = "ğŸ“¡ ë²„ìŠ¤ ìœ„ì¹˜ í™•ì¸";
                map.panTo(startPos);
                map.setLevel(3);
                break;
            case 4:
                badge.innerHTML = "ğŸšŒ ë²„ìŠ¤ ì´ë™ ì¤‘...";
                map.panTo(new kakao.maps.LatLng(35.1522, 129.0160));
                break;
            case 5:
                badge.innerHTML = "â³ í™˜ìŠ¹ ëŒ€ê¸° (ì£¼ë³€ íƒìƒ‰)";
                map.panTo(transferPos);
                map.setLevel(2);
                break;
            case 6:
                badge.innerHTML = "â˜• í¸ì˜ì‹œì„¤ ìœ„ì¹˜";
                map.panTo(new kakao.maps.LatLng(35.1535, 129.0210));
                break;
            case 7:
                badge.innerHTML = "ğŸƒ ì •ë¥˜ì¥ ì´ë™ ê²½ë¡œ";
                map.panTo(transferPos);
                break;
            case 8:
                badge.innerHTML = "ğŸšŒ ëª©ì ì§€ë¡œ ì´ë™ ì¤‘";
                map.panTo(endPos);
                map.setLevel(5);
                break;
            case 9:
                badge.innerHTML = "ğŸ ë„ì°© ì™„ë£Œ";
                map.panTo(endPos);
                map.setLevel(3);
                break;
        }

        if(stepNumber === 5) {
            if(!timerInterval) startTimer(30 * 60);
        } else if (stepNumber === 1 || stepNumber === 9) {
            clearInterval(timerInterval);
            timerInterval = null;
        }
    }

    function startTimer(duration) {
        let timer = duration, minutes, seconds;
        const display = document.querySelector('#transfer-timer');
        clearInterval(timerInterval);
        
        timerInterval = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = minutes + ":" + seconds;

            if (--timer < 0) {
                clearInterval(timerInterval);
                display.textContent = "00:00";
                alert("í™˜ìŠ¹ ì‹œê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        }, 1000);
    }
</script>

</body>
</html>
